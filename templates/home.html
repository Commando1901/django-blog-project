{% extends "base.html" %}
<p>Logged in as: {{ request.user }}</p>

{% block title %}All Blogs{% endblock %}

{% block content %}
<div class="section">
    <h2>Explore Blogs From Everyone </h2>

    {% if all_posts %}
    {% for post in all_posts %}
    <div class="blog-card2">
        <h3>{{ post.title }}</h3>
        <p>{{ post.content|truncatewords:30 }}</p>

        <a href="{% url 'blog_detail' post.id %}">Read More</a>

    <br>

        <small>By: {{ post.author.username }} * {{ post.created_at|date:"M d, Y" }}</small>

       <form method="POST" action="{% url 'like_blog' post.id %}">
            {% csrf_token %}
            <button type="submit">
                ‚ù§Ô∏è {{ post.likes.count }}
            </button>
        </form>

        <!-- Edit & Delete (ONLY author can see) -->
                {% if post.author == request.user %}
                    <br><br>
                    <a href="{% url 'edit_blog' post.id %}">‚úèÔ∏è Edit</a> |
                    <a href="{% url 'delete_blog' post.id %}"
                       onclick="return confirm('Are you sure you want to delete this blog?');">
                        üóë Delete
                    </a>
                {% endif %}
    </div>
    {% endfor %}
    {% else %}
    <p>No blogs yet.</p>
    {% endif %}
</div>
{% endblock %}
